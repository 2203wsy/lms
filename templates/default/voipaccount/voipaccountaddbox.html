<!--// $Id$ //-->
<form name="voipaccountadd" method="post" action="?m=voipaccountadd{if $customerinfo.id}&ownerid={$customerinfo.id}{/if}">
    <input type="submit" class="hiddenbtn">
    <table class="lmsbox">
        <colgroup>
            <col style="width: 1%;"/>
            <col style="width: 1%;"/>
            <col style="width: 98%;"/>
        </colgroup>
        <thead>
            {block name="voipaccountaddbox-login"}
            <tr>
                <td>
                    <img src="img/voip.gif" alt="{trans("Login:")}">
                </td>
                <td class="bold">
                    {trans("Login:")}
                </td>
                <td>
                    <input type="text" name="voipaccountdata[login]" value="{$voipaccountdata.login}" maxlength="32" size="30" required {tip text="Enter voip account login" trigger="login" bold=1}>
                </td>
            </tr>
            {/block}
        </thead>
        <tbody>
            {block name="voipaccountaddbox-password"}
            <tr>
                <td>
                    <img src="img/passwd.gif" alt="{trans("Password:")}">
                </td>
                <td class="bold nobr">
                    {trans("Password:")}
                </td>
                <td>
                    <input type="{if ConfigHelper::checkPrivilege('hide_voip_passwords')}password{else}text{/if}" name="voipaccountdata[passwd]" value="{$voipaccountdata.passwd}" required {tip text="Enter password" trigger="passwd"}>
                </td>
            </tr>
            {/block}
            {block name="voipaccountaddbox-phone"}
            <tr>
                <td>
                    <img src="img/phone.gif" alt="{trans("Phone number:")}">
                </td>
                <td class="bold nobr">
                    {trans("Phone number:")}
                </td>
                <td>
                    <input type="tel" name="voipaccountdata[phone]" value="{$voipaccountdata.phone}" required {tip text="Enter phone number" trigger="phone"}>
                </td>
            </tr>
            {/block}
            {block name="voipaccountaddbox-status"}
            <tr>
                <td>
                    <img src="img/{if ! $voipaccountdata.access}no{/if}access.gif" alt="">
                </td>
                <td class="bold nobr">
                    {trans("Status:")}
                </td>
                <td>
                    <select name="voipaccountdata[access]" {tip text="Select status" trigger="access"}>
                        <option value="1"{if $voipaccountdata.access} selected{/if}>{trans("connected<!singular>")}</option>
                        <option value="0"{if ! $voipaccountdata.access} selected{/if}>{trans("disconnected<!singular>")}</option>
                    </select>
                </td>
            </tr>
            {/block}
            {block name="voipaccountaddbox-balance"}
            <tr>
                <td>
                    <img src="img/money.gif" alt="">
                </td>
                <td class="bold nobr">
                    {trans("Balance:<!voip>")}
                </td>
                <td>
                    <input name="voipaccountdata[balance]" type="text" value="{$voipaccountdata.balance}" {tip text="Funds on account" trigger="balance"}>
                </td>
            </tr>
            {/block}
            {block name="voipaccountaddbox-cost_limit"}
            <tr>
                <td>
                    <img src="img/money.gif" alt="">
                </td>
                <td class="bold nobr">
                    {trans("Cost limit:")}
                </td>
                <td>
                    <input
                        id="costlimit"
                        name="voipaccountdata[cost_limit]"
                        type="text"
						value="{$voipaccountdata.cost_limit}"
                        {tip text="Enter max cost limit for VoIP account" trigger="cost_limit"}>

                    <label>
                    <input
                        id="costlimitcheck"
                        name="voipaccountdata[default_cost_limit]"
                        type="checkbox"
                        onclick="cost_limit_handler()"
						{if isset($voipaccountdata.default_cost_limit)}checked{/if}>
                        {trans("default")}
                    </label>
                </td>
            </tr>
            {/block}
            {block name="voipaccountaddbox-customer"}
            <tr>
                <td>
                    <img src="img/customer.gif" alt="{trans("Customer:")}">
                </td>
                <td class="bold nobr">
                    {trans("Customer:")}
                </td>
                <td>
                    <select name="voipaccountdata[ownerid]" {tip text="Assign voip account to customer" trigger="customer"} style="max-width:250px;">
                        {foreach from=$customers item=c}
                        <option value="{$c.id}"{if $voipaccountdata.ownerid == $c.id} selected{/if}>{$c.customername|truncate:40:"...":true} ({$c.id|string_format:"%04d"})</option>
                        {/foreach}
                    </select>
                </td>
            </tr>
            {/block}
            {block name="voipaccountaddbox-location"}
            <tr>
                <td>
                    <img src="img/home.gif" alt="{trans('Location:')}">
                </td>
                <td class="bold">
                    {trans("Location:")}
                </td>
                <td>
                    <input type="text" size="40" value="{$voipaccountdata.location}" id="location" name="voipaccountdata[location]"  {tip text="Enter location (optional)" trigger="location"}>
                    <a href="javascript:void(0);" onclick="if (check_teryt()) return locationchoosewin('voipaccountdata', 'voipaccountadd', document.forms['voipaccountadd'].elements['voipaccountdata[location_city]'].value,  document.forms['voipaccountadd'].elements['voipaccountdata[location_street]'].value, {ConfigHelper::getConfig('phpui.default_teryt_city')})" {tip text="Click to select location"}>&raquo;&raquo;&raquo;</a>
                    <br>
                    <input type="hidden" name="voipaccountdata[location_city]" value="{$voipaccountdata.location_city}">
                    <input type="hidden" name="voipaccountdata[location_street]" value="{$voipaccountdata.location_street}">
                    <input type="hidden" name="voipaccountdata[location_house]" value="{$voipaccountdata.location_house}">
                    <input type="hidden" name="voipaccountdata[location_flat]" value="{$voipaccountdata.location_flat}">
                    <input type="checkbox" name="voipaccountdata[teryt]" id="teryt" onchange="check_teryt('location')"{if $voipaccountdata.teryt} checked{/if}><label for="teryt">{trans("TERRIT-DB")}</label>
                </td>
            </tr>
            {/block}
            {block name="voipaccountaddbox-flags"}
            <tr>
                <td>
                    <img src="img/customer.gif" alt="{trans("Flags:")}">
                </td>
                <td class="bold nobr">
                    {trans("Flags:")}
                </td>
                <td>
                	<table>
                		<tr>
                			<td>
                				<label for="admin_record">{trans("recording for operator:")}</label>
                			</td>
                			<td>
								<input
									id="admin_record"
									type="checkbox"
									name="voipaccountdata[admin_record_flag]"
									value="yes">
							</td>
						</tr>
                		<tr>
                			<td>
                				<label for="customer_record">{trans("recording for customer:")}</label>
							</td>
							<td>
								<input
									id="customer_record"
									type="checkbox"
									name="voipaccountdata[customer_record_flag]"
									value="yes">
							</td>
                		</tr>
                	</table>
                </td>
            </tr>
            {/block}
            {block name="voipaccountaddbox-extra"}{/block}
            {block name="voipaccountaddbox-buttons"}
            <tr>
                <td class="text-right" colspan="3">
                    <a href="javascript:document.voipaccountadd.submit();" accesskey="s">
                        {trans("Submit")} <img src="img/save.gif" alt="">
                    </a>
                    <a href="?m={if $customerinfo.id}customerinfo&id={$customerinfo.id}{else}voipaccountlist{/if}">
                        {trans("Cancel")} <img src="img/cancel.gif" alt="">
                    </a>
                    <br>
                    <input type="checkbox" name="voipaccountdata[reuse]" id="reuse" value="ON" {if $voipaccountdata.reuse}checked{/if}>
                    <label for="reuse">{trans("Display this form again, when this voip account is saved")}</label>
                </td>
            </tr>
            {/block}
        </tbody>
    </table>
</form>
<SCRIPT type="text/javascript">
<!--
	document.forms['voipaccountadd'].elements['voipaccountdata[login]'].focus();
	check_teryt('location', true);
	cost_input = document.getElementById("costlimit");

	function disableCostLimitInput() {
		cost_input.value = "{trans("default")} ({ConfigHelper::getConfig('voip.default_cost_limit')|money_format})";
		cost_input.style = "border: 1px solid gray; background: lightgray;";
		cost_input.disabled = true;
	}

	function enableCostLimitInput() {
		cost_input.value = "";
		cost_input.style = "border: 1px solid black; background: #EBE4D6;";
		cost_input.disabled = false;
	}

	function cost_limit_handler() {
		if (document.getElementById("costlimitcheck").checked)
			disableCostLimitInput();
		else
			enableCostLimitInput();
	}
//-->
</SCRIPT>
